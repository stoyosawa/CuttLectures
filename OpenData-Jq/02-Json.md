## JSONデータ

東京都のデータを解析するまえに、JSONデータのフォーマットについておさらいします。


### JSONデータ型

JSONデータには4つの基本型があります。

- 文字列
- 数値
- 真偽値（`true`/`false`）
- `null`

JSONデータは「テキスト」なので、いずれも文字で記述されます。数値も文字です。たとえば、数値の0x01（1）は0x31（"1"）で表現されます。Unicodeで定義されている文字であればなんでも使用できます。文字エンコーディングはUTF-8が想定されています。

これらに加え、これら基本型を組み合わせて作成される2つの構造型があります。

- 配列
- オブジェクト


### 文字列

文字列はUnicode文字の羅列をダブルクォート`"`でくくったものです。1文字であってもダブルクォートでくくらなければなりません。クォートなしやシングルクォート（`'`）では文字列として認識されません。例を次に示します。

```
"string"                                                 # アスキー文字列
"文字列"                                                 # UTF-8文字列
"\"文字列 の 間の スペースもOK\""                             # 二重引用符はエスケープする
```


### 数値

数値はダブルクォートなしで、10進数表記の数字（0～9）で表現します。負数にはマイナス（`-`）記号を加えます（正の値には加えない）。小数点数にはドット`.`を使います。6.67430×10<sup>−11</sup>のような指数は、コンピュータ言語で一般的な仮数部（`×`の左側）と指数部（右側の10の肩に乗った数）を文字`E`でつないで表現します。小文字の`e`でもかまいません。`E`につづく指数部の値には`+`あるいは`-`を指定します。例を次に示します。

```
2345                                                     # 正の整数
-87539319                                                # 負の整数
3.1415                                                   # 小数点数
6.6743015e-11                                            # 指数（小さな数）
7.34581e+22                                              # 指数（小さな数）
```

### 真偽値

真偽値はリテラルで`true`（真）または`false`（偽）で、かならず小文字です。


### `null`

`null`はオブジェクトが存在しないことを示す特殊な値で、これも小文字で記述します。


### 配列

配列は開き角カッコ`[`、値、閉じ角カッコ`]`の3点で構成されます。値（要素）が複数あるときはカンマ`,`で区切ります（最後の値の末尾にはつけない）。値はJSONで有効な基本型ならなんでもかまわず、もちろんオブジェクトや別の配列（入れ子の配列）もOKです。値のない配列`[]`もありです（要素なしのカラ配列）。例を次に示します。

```
[]                                                       # カラの配列
[1]                                                      # 数値要素が1つだけの配列
[1, true, "picci", null]                                 # 4種の基本型の配列
[1, 2, [20, 21]]                                         # 末尾の要素が配列（入れ子）
```

`jq`で配列要素を指定するときは、配列要素番号を`[]`でくくって示します。たとえば、上記の4層素配列の2番目の要素（"picci"）を取得するには`[2]`を使います。

```
$ echo '[1, true, "picci", null]' | jq '.[2]'
"picci"
```

配列の配列の要素を抽出するなら、`[]`を（多次元配列化のように）重ねます。最後の配列の2番目の要素の1番目の要素（21）を取得するなら、`[2][1]`です。

```
$ echo '[1, 2, [20, 21]]' | jq '.[2][1]'
21
```


### オブジェクト

オブジェクトは開き中カッコ`{`、プロパティ、閉じ中カッコ`}`の3点で構成されます。収容するプロパティが複数あるときは間をカンマ`,`で区切ります。プロパティのまったくないオブジェクト（`{}`だけ）も立派なオブジェクトです。

プロパティは名前（キー）と値をコロン`:`で連結して構成します。プロパティ名は文字列で定義されるので、必ず2重引用符を伴います。値は基本型でも構造型でも何でも構いません。

例を示します。

```
{}                                                       # 中身のないオブジェクト
{"a": 15, "b": 15.12}                                    # プロパティ2つ
{"con pollo": 15, "spaghetti": ["vongole", "pomodore"]}  # 入れ子（配列）
```

`jq`で配列要素を指定するときは、キーを二重引用符でくくります。

```
$ echo '{"con pollo": 15, "vongole": 15.12}' | jq '."con pollo"'
15
```

英数単語1つ（スペース等で区切られていない）なら、引用符は省けます。

```
$ echo '{"con pollo": 15, "vongole": 15.12}' | jq '.vongole'
15.12
```

値が配列なら、以降に`[]`と要素番号を加えます。

```
$ echo '{"con pollo": 15, "spaghetti": ["vongole", "pomodore"]}' | jq '.spaghetti[0]'
"vongole"
```

値がオブジェクトなら、以降に`.`とキーを加えます。
